# Migrate from JDBCTemplate to Spring Data JPA

## Introduction to Spring Data JPA

TODO: Add notes about Spring data JPA repos.

* Spring Data JPA is available to Spring Boot application with the JPA starter. This starter dependency is not only
  brings in Spring Data JPA, but also transitively includes Hibernate as the JPA implementation.
* Below is the maven dependency that we need to add to any SpringBoot projects in order to use Spring Data JPA.

````xml

<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jpa</artifactId>
</dependency>
````

* we need to follow steps in order to query a BD using Spring Data JPA inside the Spring Boot Application.

````java

````

+ Steps are as follows
    1. We need to indicate java POJO class an entity class by using annotations like `@Entity`, `@Table`, `@Column`
        + This is how you make the relationship between table and the pojo class. If the name of Pojo Class and the
          table differ then also add an attribute
          as ``@Table(name= "contact_msg")``
        + Then, you have to make the relationship between fields of the pojo class and the columns of the table with the
          help of ``@Column`` annotation. Here also, you can use the name attribute like ``@Column(name="column_name")``
          if the names of fields differ from the names of the name of the columns in the table.
        + Primary key can be configured in pojo class using ``@Id`` annotation.
        + Id generation ``@GeneratedValue(strategy = GenerationType.AUTO, generator="native")``
          and ``@GenericGenerator(name="native", strategy = "native")``. This means that the primary key will be auto
          generated by the database.
    2. Create interfaces for a given table entity by extending the framework provided Repository interfaces. This helps
       us to run the basic CRUD operation on the table without writing the method implementations. _Note: Whenever we
       want to use the Spring Data features or Capabilities, we need to extend one of the interfaces available in the
       Spring Data JPA._ Here we are extending the CRUD repo from the Spring Database. So, this repo is responsible to
       interact with ``contact_msg`` table. Table details can be identified by Spring JPA based on the config we have
       done. Additionally, we also have to mention the data type of the Id we have in our table as well in the Contact
       POJO class. _Here in our case we have it of type int, and we are using integer data type from the Wrapper class
       i.e. Integer._ This is an empty interface, and we also add a stereotype annotation on the table
       dh ``@Repository``, and extending it to CrudRepository interface. _Note: We are extending the interface and not
       class, so we can not make a bean out of it, for that, our Spring Data JPA will create the implementations during
       the runtime, and it will create a bean for that. For that reason, we can use the bean that is created for the
       contact repo inside our code easily.
    3. Need to configure the Spring Boot by mentioning the packages of POJO class and the repo class, which enables the
       JPA functionality and scanning by using the annotations ``@EnableJpaRepositories``(-> interface repos)
       and ``@EntityScan``(-> modal classes). 